services:
  - type: web
    name: rasa-backend
    env: python
    plan: free
    buildCommand: |
      cd backend
      pip install -r requirements.txt
      rasa train
    startCommand: cd backend && rasa run --enable-api --cors "*" --debug
    autoDeploy: true
    region: oregon
    branch: main

  - type: web
    name: react-frontend
    env: static
    plan: free
    buildCommand: |
      cd frontend
      npm install
      npm run build
    staticPublishPath: frontend/build
    autoDeploy: true
    region: oregon
    branch: main
